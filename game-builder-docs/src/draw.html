<!DOCTYPE html><html lang="en"><head><title>src/draw</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../"><meta name="groc-document-path" content="src/draw"><meta name="groc-project-path" content="work/game-builder/src/draw.js"><link rel="stylesheet" type="text/css" media="all" href="../assets/style.css"><script type="text/javascript" src="../assets/behavior.js"></script><body><div id="meta"><div class="file-path">work/game-builder/src/draw.js</div></div><div id="document"><div class="segment"><div class="comments "><div class="wrapper"><h1 id="drawjs">draw.js</h1>

<h3 id="bydiegoenriquemarquezhttpwwwtreintipollocom">By <a href="http://www.treintipollo.com">Diego Enrique Marquez</a></h3>

<h3 id="findmeongithubhttpsgithubcomdiegomarquez"><a href="https://github.com/diegomarquez">Find me on Github</a></h3>

<p>Inherits from:</p>

<p>Depends of:</p>

<p>A <a href="http://requirejs.org/">requireJS</a> module. For use with <a href="http://diegomarquez.github.io/game-builder">Game-Builder</a></p>

<p>This is a collection of methods to ease the pain of using HTML5's <a href="https://developer.mozilla.org/en-US/docs/HTML/Canvas">Canvas drawing API</a>.
Not by much though, it's still pretty painfull. Believe me, I wrote a whole game only relaying
on it for graphics <a href="http://www.treintipollo.com/tirador/index.html">CHECK IT OUT</a>, it's pretty cool.</p>

<p>There are some stuff missing, like individual method to wrap quadratic and cubic curves. There
are no helpers to draw a single line either.
These methods are hopefully to just ilustrate an idea and you won't be relying on them to get serious things done.</p>

<p><strong>A note on all methods. If you don't specify a fill color, a stroke color or a line width, the current value set
in the context will be used.</strong></p></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="doodling-time">Doodling time</h2></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><hr /></div></div><div class="code"><div class="wrapper"><span class="nx">define</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">DrawUtils</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{}</span></div></div></div><div class="segment"><div class="comments doc-section"><div class="wrapper"><p style='color:#AD071D'><strong>circle</strong></p>

<p>Well... you can draw a circle.</p>

<p>Parameters:</p>

<ul>
<li><p><strong>context must be a Context 2D.</strong><br/>(<a href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D">CanvasRenderingContext2D</a>)</p></li>
<li><p><strong>x must be a Number.</strong><br/>(X coordinate of the registration point)</p></li>
<li><p><strong>y must be a Number.</strong><br/>(Y coordinate of the registration point)</p></li>
<li><p><strong>radius must be a Number.</strong><br/>(Radius of the circle)</p></li>
<li><p><strong>fillColor can be a String or a Number and has a default value of null.</strong><br/>(the circle can be a <a href="http://www.javascripter.net/faq/hextorgb.htm">hex string</a> or a number (If you are into that kind of bullshit))</p></li>
<li><p><strong>strokeColor can be a String or a Number and has a default value of null.</strong><br/>(the circle can be a <a href="http://www.javascripter.net/faq/hextorgb.htm">hex string</a> or a number)</p></li>
<li><p><strong>lineWidth is optional, must be a Number, and has a default value of null.</strong><br/>(Line width)</p></li>
<li><p><strong>close is optional, must be a Boolean, and has a default value of true.</strong><br/>(Whether the path should be closed or not)</p></li>
</ul></div></div><div class="code"><div class="wrapper">  <span class="nx">DrawUtils</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">circle</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">radius</span><span class="p">,</span> <span class="nx">fillColor</span><span class="p">,</span> <span class="nx">strokeColor</span><span class="p">,</span> <span class="nx">lineWidth</span><span class="p">,</span> <span class="nx">close</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">fillColor</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="nx">fillColor</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">strokeColor</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">strokeStyle</span> <span class="o">=</span> <span class="nx">strokeColor</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">lineWidth</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">lineWidth</span> <span class="o">=</span> <span class="nx">lineWidth</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">close</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="nx">close</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

    <span class="nx">context</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">arc</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">radius</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">close</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">closePath</span><span class="p">();</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">fillColor</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">fill</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">strokeColor</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">stroke</span><span class="p">();</span>
  <span class="p">}</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><hr /></div></div></div><div class="segment"><div class="comments doc-section"><div class="wrapper"><p style='color:#AD071D'><strong>rectangle</strong></p>

<p>A rectangle, yeah!</p>

<p>Parameters:</p>

<ul>
<li><p><strong>context must be a Context 2D.</strong><br/>(<a href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D">CanvasRenderingContext2D</a>)</p></li>
<li><p><strong>x must be a Number.</strong><br/>(X coordinate of the registration point)</p></li>
<li><p><strong>y must be a Number.</strong><br/>(Y coordinate of the registration point)</p></li>
<li><p><strong>width must be a Number.</strong><br/>(Width of the rectangle)</p></li>
<li><p><strong>height must be a Number.</strong><br/>(Height of the rectangle)</p></li>
<li><p><strong>fillColor is optional, can be a String or a Number, and has a default value of null.</strong><br/>(Fill color for the rectangle can be a <a href="http://www.javascripter.net/faq/hextorgb.htm">hex string</a> or a number (If you are into that kind of bullshit))</p></li>
<li><p><strong>strokeColor is optional, can be a String or a Number, and has a default value of null.</strong><br/>(Stroke color for the rectangle can be a <a href="http://www.javascripter.net/faq/hextorgb.htm">hex string</a> or a number (If you are into that kind of bullshit))</p></li>
<li><p><strong>lineWidth is optional, must be a Number, and has a default value of null.</strong><br/>(Line width)</p></li>
<li><p><strong>close is optional, must be a Boolean, and has a default value of true.</strong><br/>(Whether the path should be closed or not)</p></li>
</ul></div></div><div class="code"><div class="wrapper">  <span class="nx">DrawUtils</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">rectangle</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">,</span> <span class="nx">fillColor</span><span class="p">,</span> <span class="nx">strokeColor</span><span class="p">,</span> <span class="nx">lineWidth</span><span class="p">,</span> <span class="nx">close</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">strokeColor</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">strokeStyle</span> <span class="o">=</span> <span class="nx">strokeColor</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">lineWidth</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">lineWidth</span> <span class="o">=</span> <span class="nx">lineWidth</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">fillColor</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="nx">fillColor</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">close</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="nx">close</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

    <span class="nx">context</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">rect</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">close</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">closePath</span><span class="p">();</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">fillColor</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">fill</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">strokeColor</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">stroke</span><span class="p">();</span>
  <span class="p">}</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><hr /></div></div></div><div class="segment"><div class="comments doc-section"><div class="wrapper"><p style='color:#AD071D'><strong>triangle</strong></p>

<p>A triangle. This is getting interesting. Points of the triangle are drawn clock-wise.</p>

<p>Parameters:</p>

<ul>
<li><p><strong>context must be a Context 2D.</strong><br/>(<a href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D">CanvasRenderingContext2D</a>)</p></li>
<li><p><strong>centerX must be a Number.</strong><br/>(X coordinate of the registration point. The rest of the points are relative to this)</p></li>
<li><p><strong>centerY must be a Number.</strong><br/>(Y coordinate of the registration point. The rest of the points are relative to this)</p></li>
<li><p><strong>x1 must be a Number.</strong><br/>(X coordinate of the first vertex)</p></li>
<li><p><strong>y1 must be a Number.</strong><br/>(Y coordinate of the first vertex)</p></li>
<li><p><strong>x2 must be a Number.</strong><br/>(X coordinate of the second vertex)</p></li>
<li><p><strong>y2 must be a Number.</strong><br/>(Y coordinate of the second vertex)</p></li>
<li><p><strong>x3 must be a Number.</strong><br/>(X coordinate of the third vertex)</p></li>
<li><p><strong>y3 must be a Number.</strong><br/>(Y coordinate of the third vertex)</p></li>
<li><p><strong>fillColor is optional, can be a String or a Number, and has a default value of null.</strong><br/>(Fill color for the triangle can be a <a href="http://www.javascripter.net/faq/hextorgb.htm">hex string</a> or a number (If you are into that kind of bullshit))</p></li>
<li><p><strong>strokeColor is optional, can be a String or a Number, and has a default value of null.</strong><br/>(Stroke color for the triangle can be a <a href="http://www.javascripter.net/faq/hextorgb.htm">hex string</a> or a number (If you are into that kind of bullshit))</p></li>
<li><p><strong>lineWidth is optional, must be a Number, and has a default value of null.</strong><br/>(Line width)</p></li>
<li><p><strong>scale is optional, must be a Number, and has a default value of 1.</strong><br/>(Scale of the triangle. This can be usefull to avoid recalculating vertex position)</p></li>
<li><p><strong>close is optional, must be a Boolean, and has a default value of true.</strong><br/>(Whether the path should be closed or not)</p></li>
</ul></div></div><div class="code"><div class="wrapper">  <span class="nx">DrawUtils</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">triangle</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">centerX</span><span class="p">,</span> <span class="nx">centerY</span><span class="p">,</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">y1</span><span class="p">,</span> <span class="nx">x2</span><span class="p">,</span> <span class="nx">y2</span><span class="p">,</span> <span class="nx">x3</span><span class="p">,</span> <span class="nx">y3</span><span class="p">,</span> <span class="nx">fillColor</span><span class="p">,</span> <span class="nx">strokeColor</span><span class="p">,</span> <span class="nx">lineWidth</span><span class="p">,</span> <span class="nx">scale</span><span class="p">,</span> <span class="nx">close</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">strokeColor</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">strokeStyle</span> <span class="o">=</span> <span class="nx">strokeColor</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">lineWidth</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">lineWidth</span> <span class="o">=</span> <span class="nx">lineWidth</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">fillColor</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="nx">fillColor</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">close</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="nx">close</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">scale</span><span class="p">)</span> <span class="nx">scale</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

    <span class="nx">x1</span> <span class="o">*=</span> <span class="nx">scale</span><span class="p">;</span>
    <span class="nx">x2</span> <span class="o">*=</span> <span class="nx">scale</span><span class="p">;</span>
    <span class="nx">x3</span> <span class="o">*=</span> <span class="nx">scale</span><span class="p">;</span>
    <span class="nx">y1</span> <span class="o">*=</span> <span class="nx">scale</span><span class="p">;</span>
    <span class="nx">y2</span> <span class="o">*=</span> <span class="nx">scale</span><span class="p">;</span>
    <span class="nx">y3</span> <span class="o">*=</span> <span class="nx">scale</span><span class="p">;</span>

    <span class="nx">x1</span> <span class="o">+=</span> <span class="nx">centerX</span><span class="p">;</span>
    <span class="nx">x2</span> <span class="o">+=</span> <span class="nx">centerX</span><span class="p">;</span>
    <span class="nx">x3</span> <span class="o">+=</span> <span class="nx">centerX</span><span class="p">;</span>
    <span class="nx">y1</span> <span class="o">+=</span> <span class="nx">centerY</span><span class="p">;</span>
    <span class="nx">y2</span> <span class="o">+=</span> <span class="nx">centerY</span><span class="p">;</span>
    <span class="nx">y3</span> <span class="o">+=</span> <span class="nx">centerY</span><span class="p">;</span>

    <span class="nx">context</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span>

    <span class="nx">context</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">(</span><span class="nx">x1</span><span class="p">,</span> <span class="nx">y1</span><span class="p">);</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="nx">x2</span><span class="p">,</span> <span class="nx">y2</span><span class="p">);</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="nx">x3</span><span class="p">,</span> <span class="nx">y3</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">close</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">closePath</span><span class="p">();</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">fillColor</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">fill</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">strokeColor</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">stroke</span><span class="p">();</span>
  <span class="p">}</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><hr /></div></div></div><div class="segment"><div class="comments doc-section"><div class="wrapper"><p style='color:#AD071D'><strong>quadraticTriangle</strong></p>

<p>This one is pretty weird. It lets you define a triangle, with each side being drawn as a quadratic curve. Looks neat!
You might want to look into what a <a href="http://en.wikipedia.org/wiki/B%C3%A9zier_curve#Quadratic_B.C3.A9zier_curves">quadratic curve</a> is.</p>

<p>Parameters:</p>

<ul>
<li><p><strong>context must be a Context 2D.</strong><br/>(<a href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D">CanvasRenderingContext2D</a>)</p></li>
<li><p><strong>centerX must be a Number.</strong><br/>(X coordinate of the registration point. The rest of the points are relative to this)</p></li>
<li><p><strong>centerY must be a Number.</strong><br/>(Y coordinate of the registration point. The rest of the points are relative to this)</p></li>
<li><p><strong>x1 must be a Number.</strong><br/>(X coordinate of the first vertex)</p></li>
<li><p><strong>y1 must be a Number.</strong><br/>(Y coordinate of the first vertex)</p></li>
<li><p><strong>ax1 must be a Number.</strong><br/>(X coordinate of the first vertex's anchor point)</p></li>
<li><p><strong>ay1 must be a Number.</strong><br/>(Y coordinate of the first vertex's anchor point)</p></li>
<li><p><strong>x1 must be a Number.</strong><br/>(X coordinate of the second vertex)</p></li>
<li><p><strong>y1 must be a Number.</strong><br/>(Y coordinate of the second vertex)</p></li>
<li><p><strong>ax1 must be a Number.</strong><br/>(X coordinate of the second vertex's anchor point)</p></li>
<li><p><strong>ay1 must be a Number.</strong><br/>(Y coordinate of the second vertex's anchor point)</p></li>
<li><p><strong>x1 must be a Number.</strong><br/>(X coordinate of the third vertex)</p></li>
<li><p><strong>y1 must be a Number.</strong><br/>(Y coordinate of the third vertex)</p></li>
<li><p><strong>ax1 must be a Number.</strong><br/>(X coordinate of the third vertex's anchor point)</p></li>
<li><p><strong>ay1 must be a Number.</strong><br/>(Y coordinate of the third vertex's anchor point)</p></li>
<li><p><strong>fillColor is optional, can be a String or a Number, and has a default value of null.</strong><br/>(Fill color for the triangle can be a <a href="http://www.javascripter.net/faq/hextorgb.htm">hex string</a> or a number (If you are into that kind of bullshit))</p></li>
<li><p><strong>strokeColor is optional, can be a String or a Number, and has a default value of null.</strong><br/>(Stroke color for the triangle can be a <a href="http://www.javascripter.net/faq/hextorgb.htm">hex string</a> or a number (If you are into that kind of bullshit))</p></li>
<li><p><strong>lineWidth is optional, must be a Number, and has a default value of null.</strong><br/>(Line width)</p></li>
<li><p><strong>scale is optional, must be a Number, and has a default value of 1.</strong><br/>(Scale of the triangle. This can be usefull to avoid recalculating vertex position)</p></li>
<li><p><strong>close is optional, must be a Boolean, and has a default value of true.</strong><br/>(Whether the path should be closed or not)</p></li>
</ul></div></div><div class="code"><div class="wrapper">  <span class="nx">DrawUtils</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">quadraticTriangle</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">centerX</span><span class="p">,</span> <span class="nx">centerY</span><span class="p">,</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">y1</span><span class="p">,</span> <span class="nx">ax1</span><span class="p">,</span> <span class="nx">ay1</span><span class="p">,</span> <span class="nx">x2</span><span class="p">,</span> <span class="nx">y2</span><span class="p">,</span> <span class="nx">ax2</span><span class="p">,</span> <span class="nx">ay2</span><span class="p">,</span> <span class="nx">x3</span><span class="p">,</span> <span class="nx">y3</span><span class="p">,</span> <span class="nx">ax3</span><span class="p">,</span> <span class="nx">ay3</span><span class="p">,</span> <span class="nx">fillColor</span><span class="p">,</span> <span class="nx">strokeColor</span><span class="p">,</span> <span class="nx">lineWidth</span><span class="p">,</span> <span class="nx">scale</span><span class="p">,</span> <span class="nx">close</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">strokeColor</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">strokeStyle</span> <span class="o">=</span> <span class="nx">strokeColor</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">lineWidth</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">lineWidth</span> <span class="o">=</span> <span class="nx">lineWidth</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">fillColor</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="nx">fillColor</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">close</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="nx">close</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">scale</span><span class="p">)</span> <span class="nx">scale</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

    <span class="nx">x1</span> <span class="o">*=</span> <span class="nx">scale</span><span class="p">;</span>
    <span class="nx">x2</span> <span class="o">*=</span> <span class="nx">scale</span><span class="p">;</span>
    <span class="nx">x3</span> <span class="o">*=</span> <span class="nx">scale</span><span class="p">;</span>
    <span class="nx">y1</span> <span class="o">*=</span> <span class="nx">scale</span><span class="p">;</span>
    <span class="nx">y2</span> <span class="o">*=</span> <span class="nx">scale</span><span class="p">;</span>
    <span class="nx">y3</span> <span class="o">*=</span> <span class="nx">scale</span><span class="p">;</span>
    <span class="nx">ax1</span> <span class="o">*=</span> <span class="nx">scale</span><span class="p">;</span>
    <span class="nx">ax2</span> <span class="o">*=</span> <span class="nx">scale</span><span class="p">;</span>
    <span class="nx">ax3</span> <span class="o">*=</span> <span class="nx">scale</span><span class="p">;</span>
    <span class="nx">ay1</span> <span class="o">*=</span> <span class="nx">scale</span><span class="p">;</span>
    <span class="nx">ay2</span> <span class="o">*=</span> <span class="nx">scale</span><span class="p">;</span>
    <span class="nx">ay3</span> <span class="o">*=</span> <span class="nx">scale</span><span class="p">;</span>

    <span class="nx">x1</span> <span class="o">+=</span> <span class="nx">centerX</span><span class="p">;</span>
    <span class="nx">x2</span> <span class="o">+=</span> <span class="nx">centerX</span><span class="p">;</span>
    <span class="nx">x3</span> <span class="o">+=</span> <span class="nx">centerX</span><span class="p">;</span>
    <span class="nx">y1</span> <span class="o">+=</span> <span class="nx">centerY</span><span class="p">;</span>
    <span class="nx">y2</span> <span class="o">+=</span> <span class="nx">centerY</span><span class="p">;</span>
    <span class="nx">y3</span> <span class="o">+=</span> <span class="nx">centerY</span><span class="p">;</span>
    <span class="nx">ax1</span> <span class="o">+=</span> <span class="nx">centerX</span><span class="p">;</span>
    <span class="nx">ax2</span> <span class="o">+=</span> <span class="nx">centerX</span><span class="p">;</span>
    <span class="nx">ax3</span> <span class="o">+=</span> <span class="nx">centerX</span><span class="p">;</span>
    <span class="nx">ay1</span> <span class="o">+=</span> <span class="nx">centerY</span><span class="p">;</span>
    <span class="nx">ay2</span> <span class="o">+=</span> <span class="nx">centerY</span><span class="p">;</span>
    <span class="nx">ay3</span> <span class="o">+=</span> <span class="nx">centerY</span><span class="p">;</span>

    <span class="nx">context</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span>

    <span class="nx">context</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">(</span><span class="nx">x1</span><span class="p">,</span> <span class="nx">y1</span><span class="p">);</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">quadraticCurveTo</span><span class="p">(</span><span class="nx">ax1</span><span class="p">,</span> <span class="nx">ay1</span><span class="p">,</span> <span class="nx">x2</span><span class="p">,</span> <span class="nx">y2</span><span class="p">);</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">quadraticCurveTo</span><span class="p">(</span><span class="nx">ax2</span><span class="p">,</span> <span class="nx">ay2</span><span class="p">,</span> <span class="nx">x3</span><span class="p">,</span> <span class="nx">y3</span><span class="p">);</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">quadraticCurveTo</span><span class="p">(</span><span class="nx">ax3</span><span class="p">,</span> <span class="nx">ay3</span><span class="p">,</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">y1</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">close</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">closePath</span><span class="p">();</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">fillColor</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">fill</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">strokeColor</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">stroke</span><span class="p">();</span>
  <span class="p">}</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><hr /></div></div></div><div class="segment"><div class="comments doc-section"><div class="wrapper"><p style='color:#AD071D'><strong>polygon</strong> </p>

<p>This one is pretty usefull. Send in an array of points and lines will be ploted clock-wise to form the polygon.</p>

<p>Parameters:</p>

<ul>
<li><p><strong>context must be a Context 2D.</strong><br/>(<a href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D">CanvasRenderingContext2D</a>)</p></li>
<li><p><strong>x must be a Number.</strong><br/>(X coordinate registration point. All the points of the polygon are relative to this)</p></li>
<li><p><strong>y must be a Number.</strong><br/>(Y coordinate registration point. All the points of the polygon are relative to this)</p></li>
<li><p><strong>points must be an Array.</strong><br/>(An array of objects with the following form, {x:x, y:y})</p></li>
<li><p><strong>fillColor is optional, can be a String or a Number, and has a default value of null.</strong><br/>(Fill color for the polygon can be a <a href="http://www.javascripter.net/faq/hextorgb.htm">hex string</a> or a number (If you are into that kind of bullshit))</p></li>
<li><p><strong>strokeColor is optional, can be a String or a Number, and has a default value of null.</strong><br/>(Stroke color for the polygon can be a <a href="http://www.javascripter.net/faq/hextorgb.htm">hex string</a> or a number (If you are into that kind of bullshit))</p></li>
<li><p><strong>lineWidth is optional, must be a Number, and has a default value of null.</strong><br/>(Line width)</p></li>
<li><p><strong>scale is optional, must be a Number, and has a default value of 1.</strong><br/>(Scale of the polygon. This can be usefull to avoid recalculating vertex position)</p></li>
<li><p><strong>close is optional, must be a Boolean, and has a default value of true.</strong><br/>(Whether the path should be closed or not)</p></li>
</ul></div></div><div class="code"><div class="wrapper">  <span class="nx">DrawUtils</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">polygon</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">points</span><span class="p">,</span> <span class="nx">fillColor</span><span class="p">,</span> <span class="nx">strokeColor</span><span class="p">,</span> <span class="nx">lineWidth</span><span class="p">,</span> <span class="nx">scale</span><span class="p">,</span> <span class="nx">close</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">strokeColor</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">strokeStyle</span> <span class="o">=</span> <span class="nx">strokeColor</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">lineWidth</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">lineWidth</span> <span class="o">=</span> <span class="nx">lineWidth</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">fillColor</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="nx">fillColor</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">close</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="nx">close</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">scale</span><span class="p">)</span> <span class="nx">scale</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

    <span class="nx">context</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span>

    <span class="nx">context</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">((</span><span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">x</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">)</span> <span class="o">+</span> <span class="nx">x</span><span class="p">,</span> <span class="p">(</span><span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">y</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">)</span> <span class="o">+</span> <span class="nx">y</span><span class="p">);</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">context</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">((</span><span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">x</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">)</span> <span class="o">+</span> <span class="nx">x</span><span class="p">,</span> <span class="p">(</span><span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">y</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">)</span> <span class="o">+</span> <span class="nx">y</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">close</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">closePath</span><span class="p">();</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">fillColor</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">fill</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">strokeColor</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">stroke</span><span class="p">();</span>
  <span class="p">}</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><hr /></div></div></div><div class="segment"><div class="comments doc-section"><div class="wrapper"><p style='color:#AD071D'><strong>relativePolygon</strong> </p>

<p>This one is pretty usefull. Send in an array of points and lines will be ploted clock-wise to form the polygon.
Each point is relative to the last one.</p>

<p>Parameters:</p>

<ul>
<li><p><strong>context must be a Context 2D.</strong><br/>(<a href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D">CanvasRenderingContext2D</a>)</p></li>
<li><p><strong>x must be a Number.</strong><br/>(X coordinate registration point. All the points of the polygon are relative to this)</p></li>
<li><p><strong>y must be a Number.</strong><br/>(Y coordinate registration point. All the points of the polygon are relative to this)</p></li>
<li><p><strong>points must be an Array.</strong><br/>(An array of objects with the following form, {x:x, y:y})</p></li>
<li><p><strong>fillColor is optional, can be a String or a Number, and has a default value of null.</strong><br/>(Fill color for the polygon can be a <a href="http://www.javascripter.net/faq/hextorgb.htm">hex string</a> or a number (If you are into that kind of bullshit))</p></li>
<li><p><strong>strokeColor is optional, can be a String or a Number, and has a default value of null.</strong><br/>(Stroke color for the polygon can be a <a href="http://www.javascripter.net/faq/hextorgb.htm">hex string</a> or a number (If you are into that kind of bullshit))</p></li>
<li><p><strong>lineWidth is optional, must be a Number, and has a default value of null.</strong><br/>(Line width)</p></li>
<li><p><strong>scale is optional, must be a Number, and has a default value of 1.</strong><br/>(Scale of the polygon. This can be usefull to avoid recalculating vertex position)</p></li>
<li><p><strong>close is optional, must be a Boolean, and has a default value of true.</strong><br/>(Whether the path should be closed or not)</p></li>
</ul></div></div><div class="code"><div class="wrapper">  <span class="nx">DrawUtils</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">relativePolygon</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">points</span><span class="p">,</span> <span class="nx">fillColor</span><span class="p">,</span> <span class="nx">strokeColor</span><span class="p">,</span> <span class="nx">lineWidth</span><span class="p">,</span> <span class="nx">scale</span><span class="p">,</span> <span class="nx">close</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">strokeColor</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">strokeStyle</span> <span class="o">=</span> <span class="nx">strokeColor</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">lineWidth</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">lineWidth</span> <span class="o">=</span> <span class="nx">lineWidth</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">fillColor</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="nx">fillColor</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">close</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="nx">close</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">scale</span><span class="p">)</span> <span class="nx">scale</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

    <span class="nx">context</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span>

    <span class="nx">context</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">((</span><span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">x</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">)</span> <span class="o">+</span> <span class="nx">x</span><span class="p">,</span> <span class="p">(</span><span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">y</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">)</span> <span class="o">+</span> <span class="nx">y</span><span class="p">);</span>

    <span class="kd">var</span> <span class="nx">lastAbsoluteX</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">x</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">lastAbsoluteY</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">y</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">context</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(((</span><span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">lastAbsoluteX</span><span class="p">)</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">)</span> <span class="o">+</span> <span class="nx">x</span><span class="p">,</span> <span class="p">((</span><span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">lastAbsoluteY</span><span class="p">)</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">)</span> <span class="o">+</span> <span class="nx">y</span><span class="p">);</span>

      <span class="nx">lastAbsoluteX</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">lastAbsoluteX</span><span class="p">;</span>
      <span class="nx">lastAbsoluteY</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">lastAbsoluteY</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">close</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">closePath</span><span class="p">();</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">fillColor</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">fill</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">strokeColor</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">stroke</span><span class="p">();</span>
  <span class="p">}</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><hr /></div></div></div><div class="segment"><div class="comments doc-section"><div class="wrapper"><p style='color:#AD071D'><strong>quadraticPolygon</strong></p>

<p>This is like the polygon but the lines between vertexes are drawn as quadratic curves.</p>

<p>Parameters:</p>

<ul>
<li><p><strong>context must be a Context 2D.</strong><br/>(<a href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D">CanvasRenderingContext2D</a>)</p></li>
<li><p><strong>x must be a Number.</strong><br/>(X coordinate registration point. All the points of the polygon are relative to this)</p></li>
<li><p><strong>y must be a Number.</strong><br/>(Y coordinate registration point. All the points of the polygon are relative to this)</p></li>
<li><p><strong>points must be a String.</strong><br/>(An array of objects with the following form, {x:x, y:y}. Note that since lines are quadratic curves, you need to provide anchor anchor points in between each pair of vertexes)</p></li>
<li><p><strong>fillColor is optional, can be a String or a Number, and has a default value of null.</strong><br/>(Fill color for the polygon can be a <a href="http://www.javascripter.net/faq/hextorgb.htm">hex string</a> or a number (If you are into that kind of bullshit))</p></li>
<li><p><strong>strokeColor is optional, can be a String or a Number, and has a default value of null.</strong><br/>(Stroke color for the polygon can be a <a href="http://www.javascripter.net/faq/hextorgb.htm">hex string</a> or a number (If you are into that kind of bullshit))</p></li>
<li><p><strong>lineWidth is optional, must be a Number, and has a default value of null.</strong><br/>(Line width)</p></li>
<li><p><strong>scale is optional, must be a Number, and has a default value of 1.</strong><br/>(Scale of the polygon. This can be usefull to avoid recalculating vertex position)</p></li>
<li><p><strong>close is optional, must be a Boolean, and has a default value of true.</strong><br/>(Whether the path should be closed or not)</p></li>
</ul></div></div><div class="code"><div class="wrapper">  <span class="nx">DrawUtils</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">quadraticPolygon</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">points</span><span class="p">,</span> <span class="nx">fillColor</span><span class="p">,</span> <span class="nx">strokeColor</span><span class="p">,</span> <span class="nx">lineWidth</span><span class="p">,</span> <span class="nx">scale</span><span class="p">,</span> <span class="nx">close</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">strokeColor</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">strokeStyle</span> <span class="o">=</span> <span class="nx">strokeColor</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">lineWidth</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">lineWidth</span> <span class="o">=</span> <span class="nx">lineWidth</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">fillColor</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="nx">fillColor</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">close</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="nx">close</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">scale</span><span class="p">)</span> <span class="nx">scale</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

    <span class="nx">context</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span>

    <span class="nx">context</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">((</span><span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">x</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">)</span> <span class="o">+</span> <span class="nx">x</span><span class="p">,</span> <span class="p">(</span><span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">y</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">)</span> <span class="o">+</span> <span class="nx">y</span><span class="p">);</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">+=</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>

      <span class="kd">var</span> <span class="nx">next</span> <span class="o">=</span> <span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">next</span> <span class="o">&gt;=</span> <span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">next</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">context</span><span class="p">.</span><span class="nx">quadraticCurveTo</span><span class="p">((</span><span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">x</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">)</span> <span class="o">+</span> <span class="nx">x</span><span class="p">,</span> <span class="p">(</span><span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">y</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">)</span> <span class="o">+</span> <span class="nx">y</span><span class="p">,</span> <span class="p">(</span><span class="nx">points</span><span class="p">[</span><span class="nx">next</span><span class="p">].</span><span class="nx">x</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">)</span> <span class="o">+</span> <span class="nx">x</span><span class="p">,</span> <span class="p">(</span><span class="nx">points</span><span class="p">[</span><span class="nx">next</span><span class="p">].</span><span class="nx">y</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">)</span> <span class="o">+</span> <span class="nx">y</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">close</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">closePath</span><span class="p">();</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">fillColor</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">fill</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">strokeColor</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">stroke</span><span class="p">();</span>
  <span class="p">}</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><hr /></div></div></div><div class="segment"><div class="comments doc-section"><div class="wrapper"><p style='color:#AD071D'><strong>quadraticPolygonAuto</strong></p>

<p>This is like the polygon but the lines between vertexes are drawn as quadratic curves.
The anchor points for the quadratic curves are generated, by calculating the normals between each pair of points.
The anchor points are generated alternating sides.</p>

<p>Parameters:</p>

<ul>
<li><p><strong>context must be a Context 2D.</strong><br/>(<a href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D">CanvasRenderingContext2D</a>)</p></li>
<li><p><strong>x must be a Number.</strong><br/>(X coordinate registration point. All the points of the polygon are relative to this)</p></li>
<li><p><strong>y must be a Number.</strong><br/>(Y coordinate registration point. All the points of the polygon are relative to this)</p></li>
<li><p><strong>anchorDistance must be a Number.</strong><br/>(Distance to which generated anchor points are placed from thir respective segments)</p></li>
<li><p><strong>points must be a String.</strong><br/>(An array of objects with the following form, {x:x, y:y}.)</p></li>
<li><p><strong>fillColor is optional, can be a String or a Number, and has a default value of null.</strong><br/>(Fill color for the polygon can be a <a href="http://www.javascripter.net/faq/hextorgb.htm">hex string</a> or a number (If you are into that kind of bullshit))</p></li>
<li><p><strong>strokeColor is optional, can be a String or a Number, and has a default value of null.</strong><br/>(Stroke color for the polygon can be a <a href="http://www.javascripter.net/faq/hextorgb.htm">hex string</a> or a number (If you are into that kind of bullshit))</p></li>
<li><p><strong>lineWidth is optional, must be a Number, and has a default value of null.</strong><br/>(Line width)</p></li>
<li><p><strong>scale is optional, must be a Number, and has a default value of 1.</strong><br/>(Scale of the polygon. This can be usefull to avoid recalculating vertex position)</p></li>
<li><p><strong>positive is optional, must be a Boolean, and has a default value of false.</strong><br/>(On which side the anchor points should start alternation)</p></li>
<li><p><strong>close is optional, must be a Boolean, and has a default value of true.</strong><br/>(Whether the path should be closed or not)</p></li>
</ul></div></div><div class="code"><div class="wrapper">  <span class="nx">DrawUtils</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">quadraticPolygonAuto</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">anchorDistance</span><span class="p">,</span> <span class="nx">points</span><span class="p">,</span> <span class="nx">fillColor</span><span class="p">,</span> <span class="nx">strokeColor</span><span class="p">,</span> <span class="nx">lineWidth</span><span class="p">,</span> <span class="nx">scale</span><span class="p">,</span> <span class="nx">positive</span><span class="p">,</span> <span class="nx">close</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">strokeColor</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">strokeStyle</span> <span class="o">=</span> <span class="nx">strokeColor</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">lineWidth</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">lineWidth</span> <span class="o">=</span> <span class="nx">lineWidth</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">fillColor</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="nx">fillColor</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">close</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="nx">close</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">scale</span><span class="p">)</span> <span class="nx">scale</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

    <span class="nx">context</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span>

    <span class="kd">var</span> <span class="nx">midX</span><span class="p">,</span> <span class="nx">midY</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">anchorX</span><span class="p">,</span> <span class="nx">anchorY</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">normalSide</span> <span class="o">=</span> <span class="nx">positive</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">midX</span> <span class="o">=</span> <span class="p">(</span><span class="nx">points</span><span class="p">[</span><span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">].</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">x</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
      <span class="nx">midY</span> <span class="o">=</span> <span class="p">(</span><span class="nx">points</span><span class="p">[</span><span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">].</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">y</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>

      <span class="kd">var</span> <span class="nx">angle</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">atan2</span><span class="p">(</span><span class="nx">points</span><span class="p">[</span><span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">].</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">y</span><span class="p">,</span> <span class="nx">points</span><span class="p">[</span><span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">].</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">x</span><span class="p">)</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">normalSide</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">anchorX</span> <span class="o">=</span> <span class="nx">midX</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">angle</span><span class="p">)</span> <span class="o">*</span> <span class="nx">anchorDistance</span><span class="p">;</span>
        <span class="nx">anchorY</span> <span class="o">=</span> <span class="nx">midY</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">angle</span><span class="p">)</span> <span class="o">*</span> <span class="nx">anchorDistance</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">anchorX</span> <span class="o">=</span> <span class="nx">midX</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">angle</span><span class="p">)</span> <span class="o">*</span> <span class="o">-</span><span class="nx">anchorDistance</span><span class="p">;</span>
        <span class="nx">anchorY</span> <span class="o">=</span> <span class="nx">midY</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">angle</span><span class="p">)</span> <span class="o">*</span> <span class="o">-</span><span class="nx">anchorDistance</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">context</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">((</span><span class="nx">points</span><span class="p">[</span><span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">].</span><span class="nx">x</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">)</span> <span class="o">+</span> <span class="nx">x</span><span class="p">,</span> <span class="p">(</span><span class="nx">points</span><span class="p">[</span><span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">].</span><span class="nx">y</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">)</span> <span class="o">+</span> <span class="nx">y</span><span class="p">);</span>
      <span class="nx">context</span><span class="p">.</span><span class="nx">quadraticCurveTo</span><span class="p">((</span><span class="nx">anchorX</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">)</span> <span class="o">+</span> <span class="nx">x</span><span class="p">,</span> <span class="p">(</span><span class="nx">anchorY</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">)</span> <span class="o">+</span> <span class="nx">y</span><span class="p">,</span> <span class="p">(</span><span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">x</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">)</span> <span class="o">+</span> <span class="nx">x</span><span class="p">,</span> <span class="p">(</span><span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">y</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">)</span> <span class="o">+</span> <span class="nx">y</span><span class="p">);</span>

      <span class="nx">normalSide</span> <span class="o">=</span> <span class="o">!</span><span class="nx">normalSide</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">close</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">context</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">((</span><span class="nx">points</span><span class="p">[</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">].</span><span class="nx">x</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">)</span> <span class="o">+</span> <span class="nx">x</span><span class="p">,</span> <span class="p">(</span><span class="nx">points</span><span class="p">[</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">].</span><span class="nx">y</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">)</span> <span class="o">+</span> <span class="nx">y</span><span class="p">);</span>
      <span class="nx">context</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">((</span><span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">x</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">)</span> <span class="o">+</span> <span class="nx">x</span><span class="p">,</span> <span class="p">(</span><span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">y</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">)</span> <span class="o">+</span> <span class="nx">y</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">fillColor</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">fill</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">strokeColor</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">stroke</span><span class="p">();</span>
  <span class="p">}</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><hr /></div></div></div><div class="segment"><div class="comments doc-section"><div class="wrapper"><p style='color:#AD071D'><strong>quadraticPolygonAuto</strong></p>

<p>This is like the polygon but the lines between vertexes are drawn as quadratic curves.
The anchor points for the quadratic curves are generated, by calculating the normals between each pair of points.
The anchor points are generated alternating sides.
More curves are generated between the connection points to achieve smoother connections</p>

<p>Parameters:</p>

<ul>
<li><p><strong>context must be a Context 2D.</strong><br/>(<a href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D">CanvasRenderingContext2D</a>)</p></li>
<li><p><strong>x must be a Number.</strong><br/>(X coordinate registration point. All the points of the polygon are relative to this)</p></li>
<li><p><strong>y must be a Number.</strong><br/>(Y coordinate registration point. All the points of the polygon are relative to this)</p></li>
<li><p><strong>anchorDistance must be a Number.</strong><br/>(Distance to which generated anchor points are placed from thir respective segments)</p></li>
<li><p><strong>points must be a String.</strong><br/>(An array of objects with the following form, {x:x, y:y}.)</p></li>
<li><p><strong>fillColor is optional, can be a String or a Number, and has a default value of null.</strong><br/>(Fill color for the polygon can be a <a href="http://www.javascripter.net/faq/hextorgb.htm">hex string</a> or a number (If you are into that kind of bullshit))</p></li>
<li><p><strong>strokeColor is optional, can be a String or a Number, and has a default value of null.</strong><br/>(Stroke color for the polygon can be a <a href="http://www.javascripter.net/faq/hextorgb.htm">hex string</a> or a number (If you are into that kind of bullshit))</p></li>
<li><p><strong>lineWidth is optional, must be a Number, and has a default value of null.</strong><br/>(Line width)</p></li>
<li><p><strong>scale is optional, must be a Number, and has a default value of 1.</strong><br/>(Scale of the polygon. This can be usefull to avoid recalculating vertex position)</p></li>
<li><p><strong>positive is optional, must be a Boolean, and has a default value of false.</strong><br/>(On which side the anchor points should start alternation)</p></li>
<li><p><strong>close is optional, must be a Boolean, and has a default value of true.</strong><br/>(Whether the path should be closed or not)</p></li>
</ul></div></div><div class="code"><div class="wrapper">  <span class="nx">DrawUtils</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">quadraticPolygonAutoSmooth</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">anchorDistance</span><span class="p">,</span> <span class="nx">points</span><span class="p">,</span> <span class="nx">fillColor</span><span class="p">,</span> <span class="nx">strokeColor</span><span class="p">,</span> <span class="nx">lineWidth</span><span class="p">,</span> <span class="nx">scale</span><span class="p">,</span> <span class="nx">positive</span><span class="p">,</span> <span class="nx">close</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">strokeColor</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">strokeStyle</span> <span class="o">=</span> <span class="nx">strokeColor</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">lineWidth</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">lineWidth</span> <span class="o">=</span> <span class="nx">lineWidth</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">fillColor</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="nx">fillColor</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">close</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="nx">close</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">scale</span><span class="p">)</span> <span class="nx">scale</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

    <span class="nx">context</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span>

    <span class="kd">var</span> <span class="nx">normalSide</span> <span class="o">=</span> <span class="nx">positive</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">firstMidX</span><span class="p">,</span> <span class="nx">firstMidY</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">secondMidX</span><span class="p">,</span> <span class="nx">secondMidY</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">firstAnchorX</span><span class="p">,</span> <span class="nx">firstAnchorY</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">secondAnchorX</span><span class="p">,</span> <span class="nx">secondAnchorY</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">firstSmoothX</span><span class="p">,</span> <span class="nx">firstSmoothY</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">secondSmoothX</span><span class="p">,</span> <span class="nx">secondSmoothY</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">thirdSmoothX</span><span class="p">,</span> <span class="nx">thirdSmoothY</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">begin</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="kd">var</span> <span class="nx">end</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">last</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">current</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">next</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">i</span> <span class="o">===</span> <span class="nx">points</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">last</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
        <span class="nx">current</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="nx">next</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">i</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">last</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
        <span class="nx">current</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="nx">next</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">last</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
        <span class="nx">current</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="nx">next</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>
      <span class="p">}</span>

      <span class="nx">firstMidX</span> <span class="o">=</span> <span class="p">(</span><span class="nx">last</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">current</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
      <span class="nx">firstMidY</span> <span class="o">=</span> <span class="p">(</span><span class="nx">last</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">current</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>

      <span class="nx">secondMidX</span> <span class="o">=</span> <span class="p">(</span><span class="nx">current</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">next</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
      <span class="nx">secondMidY</span> <span class="o">=</span> <span class="p">(</span><span class="nx">current</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">next</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>

      <span class="kd">var</span> <span class="nx">firstAngle</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">atan2</span><span class="p">(</span><span class="nx">last</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">current</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="nx">last</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">current</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">secondAngle</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">atan2</span><span class="p">(</span><span class="nx">current</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">next</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="nx">current</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">next</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Generate the first anchor point</p></div></div><div class="code"><div class="wrapper">      <span class="k">if</span> <span class="p">(</span><span class="nx">normalSide</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">firstAnchorX</span> <span class="o">=</span> <span class="nx">firstMidX</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">firstAngle</span><span class="p">)</span> <span class="o">*</span> <span class="nx">anchorDistance</span><span class="p">;</span>
        <span class="nx">firstAnchorY</span> <span class="o">=</span> <span class="nx">firstMidY</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">firstAngle</span><span class="p">)</span> <span class="o">*</span> <span class="nx">anchorDistance</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">firstAnchorX</span> <span class="o">=</span> <span class="nx">firstMidX</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">firstAngle</span><span class="p">)</span> <span class="o">*</span> <span class="o">-</span><span class="nx">anchorDistance</span><span class="p">;</span>
        <span class="nx">firstAnchorY</span> <span class="o">=</span> <span class="nx">firstMidY</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">firstAngle</span><span class="p">)</span> <span class="o">*</span> <span class="o">-</span><span class="nx">anchorDistance</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">normalSide</span> <span class="o">=</span> <span class="o">!</span><span class="nx">normalSide</span><span class="p">;</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Generate the second anchor point</p></div></div><div class="code"><div class="wrapper">      <span class="k">if</span> <span class="p">(</span><span class="nx">normalSide</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">secondAnchorX</span> <span class="o">=</span> <span class="nx">secondMidX</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">secondAngle</span><span class="p">)</span> <span class="o">*</span> <span class="nx">anchorDistance</span><span class="p">;</span>
        <span class="nx">secondAnchorY</span> <span class="o">=</span> <span class="nx">secondMidY</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">secondAngle</span><span class="p">)</span> <span class="o">*</span> <span class="nx">anchorDistance</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">secondAnchorX</span> <span class="o">=</span> <span class="nx">secondMidX</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">secondAngle</span><span class="p">)</span> <span class="o">*</span> <span class="o">-</span><span class="nx">anchorDistance</span><span class="p">;</span>
        <span class="nx">secondAnchorY</span> <span class="o">=</span> <span class="nx">secondMidY</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">secondAngle</span><span class="p">)</span> <span class="o">*</span> <span class="o">-</span><span class="nx">anchorDistance</span><span class="p">;</span>
      <span class="p">}</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Generate the points for the smoothing curve</p></div></div><div class="code"><div class="wrapper">      <span class="nx">firstSmoothX</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">calculatePointInQuadraticCurveX</span><span class="p">(</span><span class="nx">last</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">last</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="nx">firstAnchorX</span><span class="p">,</span> <span class="nx">firstAnchorY</span><span class="p">,</span> <span class="nx">current</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">current</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">);</span>
      <span class="nx">firstSmoothY</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">calculatePointInQuadraticCurveY</span><span class="p">(</span><span class="nx">last</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">last</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="nx">firstAnchorX</span><span class="p">,</span> <span class="nx">firstAnchorY</span><span class="p">,</span> <span class="nx">current</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">current</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">);</span>

      <span class="nx">secondSmoothX</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">calculatePointInQuadraticCurveX</span><span class="p">(</span><span class="nx">last</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">last</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="nx">firstAnchorX</span><span class="p">,</span> <span class="nx">firstAnchorY</span><span class="p">,</span> <span class="nx">current</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">current</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">);</span>
      <span class="nx">secondSmoothY</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">calculatePointInQuadraticCurveY</span><span class="p">(</span><span class="nx">last</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">last</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="nx">firstAnchorX</span><span class="p">,</span> <span class="nx">firstAnchorY</span><span class="p">,</span> <span class="nx">current</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">current</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">);</span>

      <span class="nx">thirdSmoothX</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">calculatePointInQuadraticCurveX</span><span class="p">(</span><span class="nx">current</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">current</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="nx">secondAnchorX</span><span class="p">,</span> <span class="nx">secondAnchorY</span><span class="p">,</span> <span class="nx">next</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">next</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">);</span>
      <span class="nx">thirdSmoothY</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">calculatePointInQuadraticCurveY</span><span class="p">(</span><span class="nx">current</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">current</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="nx">secondAnchorX</span><span class="p">,</span> <span class="nx">secondAnchorY</span><span class="p">,</span> <span class="nx">next</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">next</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">);</span>

      <span class="nx">context</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">((</span><span class="nx">firstSmoothX</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">)</span> <span class="o">+</span> <span class="nx">x</span><span class="p">,</span> <span class="p">(</span><span class="nx">firstSmoothY</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">)</span> <span class="o">+</span> <span class="nx">y</span><span class="p">);</span>
      <span class="nx">context</span><span class="p">.</span><span class="nx">quadraticCurveTo</span><span class="p">((</span><span class="nx">firstAnchorX</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">)</span> <span class="o">+</span> <span class="nx">x</span><span class="p">,</span> <span class="p">(</span><span class="nx">firstAnchorY</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">)</span> <span class="o">+</span> <span class="nx">y</span><span class="p">,</span> <span class="p">(</span><span class="nx">secondSmoothX</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">)</span> <span class="o">+</span> <span class="nx">x</span><span class="p">,</span> <span class="p">(</span><span class="nx">secondSmoothY</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">)</span> <span class="o">+</span> <span class="nx">y</span><span class="p">);</span>
      <span class="nx">context</span><span class="p">.</span><span class="nx">quadraticCurveTo</span><span class="p">((</span><span class="nx">current</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">)</span> <span class="o">+</span> <span class="nx">x</span><span class="p">,</span> <span class="p">(</span><span class="nx">current</span><span class="p">.</span><span class="nx">y</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">)</span> <span class="o">+</span> <span class="nx">y</span><span class="p">,</span> <span class="p">(</span><span class="nx">thirdSmoothX</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">)</span> <span class="o">+</span> <span class="nx">x</span><span class="p">,</span> <span class="p">(</span><span class="nx">thirdSmoothY</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">)</span> <span class="o">+</span> <span class="nx">y</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">close</span><span class="p">)</span>
      <span class="nx">context</span><span class="p">.</span><span class="nx">closePath</span><span class="p">();</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">fillColor</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">fill</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">strokeColor</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">stroke</span><span class="p">();</span>
  <span class="p">}</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><hr /></div></div></div><div class="segment"><div class="comments doc-section"><div class="wrapper"><p style='color:#AD071D'><strong>realtiveQuadraticPolygonAuto</strong></p>

<p>This is like the polygon but the lines between vertexes are drawn as quadratic curves.
The anchor points for the quadratic curves are generated, by calculating the normals between each pair of points.
The anchor points are generated alternating sides.
Each point is relative to the last one.</p>

<p>Parameters:</p>

<ul>
<li><p><strong>context must be a Context 2D.</strong><br/>(<a href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D">CanvasRenderingContext2D</a>)</p></li>
<li><p><strong>x must be a Number.</strong><br/>(X coordinate registration point. All the points of the polygon are relative to this)</p></li>
<li><p><strong>y must be a Number.</strong><br/>(Y coordinate registration point. All the points of the polygon are relative to this)</p></li>
<li><p><strong>anchorDistance must be a Number.</strong><br/>(Distance to which generated anchor points are placed from thir respective segments)</p></li>
<li><p><strong>points must be a String.</strong><br/>(An array of objects with the following form, {x:x, y:y}.)</p></li>
<li><p><strong>fillColor is optional, can be a String or a Number, and has a default value of null.</strong><br/>(Fill color for the polygon can be a <a href="http://www.javascripter.net/faq/hextorgb.htm">hex string</a> or a number (If you are into that kind of bullshit))</p></li>
<li><p><strong>strokeColor is optional, can be a String or a Number, and has a default value of null.</strong><br/>(Stroke color for the polygon can be a <a href="http://www.javascripter.net/faq/hextorgb.htm">hex string</a> or a number (If you are into that kind of bullshit))</p></li>
<li><p><strong>lineWidth is optional, must be a Number, and has a default value of null.</strong><br/>(Line width)</p></li>
<li><p><strong>scale is optional, must be a Number, and has a default value of 1.</strong><br/>(Scale of the polygon. This can be usefull to avoid recalculating vertex position)</p></li>
<li><p><strong>positive is optional, must be a Boolean, and has a default value of false.</strong><br/>(On which side the anchor points should start alternation)</p></li>
<li><p><strong>close is optional, must be a Boolean, and has a default value of true.</strong><br/>(Whether the path should be closed or not)</p></li>
</ul></div></div><div class="code"><div class="wrapper">  <span class="nx">DrawUtils</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">realtiveQuadraticPolygonAuto</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">anchorDistance</span><span class="p">,</span> <span class="nx">points</span><span class="p">,</span> <span class="nx">fillColor</span><span class="p">,</span> <span class="nx">strokeColor</span><span class="p">,</span> <span class="nx">lineWidth</span><span class="p">,</span> <span class="nx">scale</span><span class="p">,</span> <span class="nx">positive</span><span class="p">,</span> <span class="nx">close</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">strokeColor</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">strokeStyle</span> <span class="o">=</span> <span class="nx">strokeColor</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">lineWidth</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">lineWidth</span> <span class="o">=</span> <span class="nx">lineWidth</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">fillColor</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="nx">fillColor</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">close</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="nx">close</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">scale</span><span class="p">)</span> <span class="nx">scale</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

    <span class="nx">context</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span>

    <span class="kd">var</span> <span class="nx">diffX</span><span class="p">,</span> <span class="nx">diffY</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">anchorX</span><span class="p">,</span> <span class="nx">anchorY</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">normalSide</span> <span class="o">=</span> <span class="nx">positive</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">lastAbsoluteX</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">x</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">lastAbsoluteY</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">y</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">currentAbsoluteX</span><span class="p">,</span> <span class="nx">currentAbsoluteY</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">diffX</span> <span class="o">=</span> <span class="p">((</span><span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">lastAbsoluteX</span><span class="p">)</span> <span class="o">+</span> <span class="nx">lastAbsoluteX</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
      <span class="nx">diffY</span> <span class="o">=</span> <span class="p">((</span><span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">lastAbsoluteY</span><span class="p">)</span> <span class="o">+</span> <span class="nx">lastAbsoluteY</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>

      <span class="kd">var</span> <span class="nx">angle</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">atan2</span><span class="p">(</span><span class="nx">diffY</span><span class="p">,</span> <span class="nx">diffX</span><span class="p">)</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">normalSide</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">anchorX</span> <span class="o">=</span> <span class="nx">diffX</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">angle</span><span class="p">)</span> <span class="o">*</span> <span class="nx">anchorDistance</span><span class="p">;</span>
        <span class="nx">anchorY</span> <span class="o">=</span> <span class="nx">diffY</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">angle</span><span class="p">)</span> <span class="o">*</span> <span class="nx">anchorDistance</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">anchorX</span> <span class="o">=</span> <span class="nx">diffX</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">angle</span><span class="p">)</span> <span class="o">*</span> <span class="o">-</span><span class="nx">anchorDistance</span><span class="p">;</span>
        <span class="nx">anchorY</span> <span class="o">=</span> <span class="nx">diffY</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">angle</span><span class="p">)</span> <span class="o">*</span> <span class="o">-</span><span class="nx">anchorDistance</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">context</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">((</span><span class="nx">lastAbsoluteX</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">)</span> <span class="o">+</span> <span class="nx">x</span><span class="p">,</span> <span class="p">(</span><span class="nx">lastAbsoluteY</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">)</span> <span class="o">+</span> <span class="nx">y</span><span class="p">);</span>
      <span class="nx">context</span><span class="p">.</span><span class="nx">quadraticCurveTo</span><span class="p">((</span><span class="nx">anchorX</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">)</span> <span class="o">+</span> <span class="nx">x</span><span class="p">,</span> <span class="p">(</span><span class="nx">anchorY</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">)</span> <span class="o">+</span> <span class="nx">y</span><span class="p">,</span> <span class="p">((</span><span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">lastAbsoluteX</span><span class="p">)</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">)</span> <span class="o">+</span> <span class="nx">x</span><span class="p">,</span> <span class="p">((</span><span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">lastAbsoluteY</span><span class="p">)</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">)</span> <span class="o">+</span> <span class="nx">y</span><span class="p">);</span>

      <span class="nx">normalSide</span> <span class="o">=</span> <span class="o">!</span><span class="nx">normalSide</span><span class="p">;</span>

      <span class="nx">lastAbsoluteX</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">lastAbsoluteX</span><span class="p">;</span>
      <span class="nx">lastAbsoluteY</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">lastAbsoluteY</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">close</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">context</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">((</span><span class="nx">points</span><span class="p">[</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">].</span><span class="nx">x</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">)</span> <span class="o">+</span> <span class="nx">x</span><span class="p">,</span> <span class="p">(</span><span class="nx">points</span><span class="p">[</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">].</span><span class="nx">y</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">)</span> <span class="o">+</span> <span class="nx">y</span><span class="p">);</span>
      <span class="nx">context</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">((</span><span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">x</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">)</span> <span class="o">+</span> <span class="nx">x</span><span class="p">,</span> <span class="p">(</span><span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">y</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">)</span> <span class="o">+</span> <span class="nx">y</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">fillColor</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">fill</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">strokeColor</span><span class="p">)</span> <span class="nx">context</span><span class="p">.</span><span class="nx">stroke</span><span class="p">();</span>
  <span class="p">}</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><hr /></div></div><div class="code"><div class="wrapper">  <span class="nx">DrawUtils</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">calculatePointInQuadraticCurveX</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">startX</span><span class="p">,</span> <span class="nx">startY</span><span class="p">,</span> <span class="nx">anchorX</span><span class="p">,</span> <span class="nx">anchorY</span><span class="p">,</span> <span class="nx">endX</span><span class="p">,</span> <span class="nx">endY</span><span class="p">,</span> <span class="nx">p</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="nx">p</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="nx">p</span><span class="p">)</span> <span class="o">*</span> <span class="nx">startX</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="nx">p</span><span class="p">)</span> <span class="o">*</span> <span class="nx">p</span> <span class="o">*</span> <span class="nx">anchorX</span> <span class="o">+</span> <span class="nx">p</span> <span class="o">*</span> <span class="nx">p</span> <span class="o">*</span> <span class="nx">endX</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">DrawUtils</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">calculatePointInQuadraticCurveY</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">startX</span><span class="p">,</span> <span class="nx">startY</span><span class="p">,</span> <span class="nx">anchorX</span><span class="p">,</span> <span class="nx">anchorY</span><span class="p">,</span> <span class="nx">endX</span><span class="p">,</span> <span class="nx">endY</span><span class="p">,</span> <span class="nx">p</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="nx">p</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="nx">p</span><span class="p">)</span> <span class="o">*</span> <span class="nx">startY</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="nx">p</span><span class="p">)</span> <span class="o">*</span> <span class="nx">p</span> <span class="o">*</span> <span class="nx">anchorY</span> <span class="o">+</span> <span class="nx">p</span> <span class="o">*</span> <span class="nx">p</span> <span class="o">*</span> <span class="nx">endY</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="k">new</span> <span class="nx">DrawUtils</span><span class="p">()</span>
<span class="p">});</span></div></div></div></div></body></html>