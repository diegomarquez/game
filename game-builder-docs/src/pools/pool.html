<!DOCTYPE html><html lang="en"><head><title>src/pools/pool</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../../"><meta name="groc-document-path" content="src/pools/pool"><meta name="groc-project-path" content="work/game-builder/src/pools/pool.js"><link rel="stylesheet" type="text/css" media="all" href="../../assets/style.css"><script type="text/javascript" src="../../assets/behavior.js"></script><body><div id="meta"><div class="file-path">work/game-builder/src/pools/pool.js</div></div><div id="document"><div class="segment"><div class="comments "><div class="wrapper"><h1 id="pooljs">pool.js</h1>

<h3 id="bydiegoenriquemarquezhttpwwwtreintipollocom">By <a href="http://www.treintipollo.com">Diego Enrique Marquez</a></h3>

<h3 id="findmeongithubhttpsgithubcomdiegomarquez"><a href="https://github.com/diegomarquez">Find me on Github</a></h3>

<p>Inherits from: <a href="http://diegomarquez.github.io/game-builder/game-builder-docs/src/delegate.html">delegate</a></p>

<p>Depends of: 
<a href="http://diegomarquez.github.io/game-builder/game-builder-docs/src/util.html">util</a>
<a href="http://diegomarquez.github.io/game-builder/game-builder-docs/src/debug/error-printer.html">error-printer</a></p>

<p>A <a href="http://requirejs.org/">requireJS</a> module. For use with <a href="http://diegomarquez.github.io/game-builder">Game-Builder</a></p>

<p>This module defines the base object from which <a href="http://diegomarquez.github.io/game-builder/game-builder-docs/src/pools/game-object-pool.html">game-object-pool</a> and
<a href="http://diegomarquez.github.io/game-builder/game-builder-docs/src/pools/component-pool.html">component-pool</a> are extended from.</p>

<p>These pools create objects dynamically when requested. When one of those objects is 
not needed in it's current state anymore,
it is recycled. Instead of destroying the reference it is sent back to the corresponding pool, so it
can be picked up again and refurbished later. </p>

<p>Pools continue to create objects dynamically until the set cap for a given type is reached.
From then on, if the pool does not have available objects, it throws an error if it is requested
something.</p>

<p>One of the key features of both <a href="http://diegomarquez.github.io/game-builder/game-builder-docs/src/pools/game-object-pool.html">game-object-pool</a> and
<a href="http://diegomarquez.github.io/game-builder/game-builder-docs/src/pools/component-pool.html">component-pool</a> is that you not only can define collections of 
instances, but also configurations for those instances. A configuration defines a set
of arguments, to be applied on an instance. This allows to have configurations that would
otherwise be sprinckled all over a project, centralized in the same place, or the same handfull
of places. </p>

<p>A less obvious advantage of preconfiguring objects, is that you avoid creating small dynamic
objects that will most likely be used in the initialization of other larger dynamic objects.</p>

<p>Generally speaking, pooling is very usefull because it frees CPU time from the burden of allocating
and deallocating memory every single time you want something new. In the case of Garbage Collected
environments, like a Javascript virtual machine, pooling should also reduce the time spent
by the Garbage Collector doing it's thing. Which is good.</p>

<p>Pooling objects is good and all, but it is probably not a good idea to pool absolutely everything
you will need in the entire life span of an application, unless it is a small one. For that reason
it is possible to clear and repopulate pools.</p></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="pooling">Pooling</h2></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><hr /></div></div><div class="code"><div class="wrapper"><span class="nx">define</span><span class="p">([</span><span class="s2">&quot;delegate&quot;</span><span class="p">,</span> <span class="s2">&quot;util&quot;</span><span class="p">,</span> <span class="s2">&quot;error-printer&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">Delegate</span><span class="p">,</span> <span class="nx">Util</span><span class="p">,</span> <span class="nx">ErrorPrinter</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">Pool</span> <span class="o">=</span> <span class="nx">Delegate</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
    <span class="nx">init</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">_super</span><span class="p">();</span>

      <span class="k">this</span><span class="p">.</span><span class="nx">pools</span> <span class="o">=</span> <span class="p">{};</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">configurations</span> <span class="o">=</span> <span class="p">{};</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">active</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="p">},</span></div></div></div><div class="segment"><div class="comments doc-section"><div class="wrapper"><p style='color:#AD071D'><strong>createPool</strong></p>

<p>Creates a collections of a given type of objects, assigning it an
id to later be able to get references out of it.</p>

<p>Parameters:</p>

<ul>
<li><p><strong>alias must be a String.</strong><br/>(Id used to later refer to the collection that is being created)</p></li>
<li><p><strong>type must be an Object.</strong><br/>(The object prototype from which instances in this pool will be created from)</p></li>
<li><p><strong>amount must be a Number.</strong><br/>(The amount of objects to add to the pool initially.)</p></li>
</ul></div></div><div class="code"><div class="wrapper">    <span class="nx">createPool</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">alias</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">amount</span><span class="p">)</span> <span class="p">{</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>A pool object contains an array of objects, and a variable 
of the type of the objects it contains.</p></div></div><div class="code"><div class="wrapper">      <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">pools</span><span class="p">[</span><span class="nx">alias</span><span class="p">]</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">pools</span><span class="p">[</span><span class="nx">alias</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
          <span class="nx">objects</span><span class="o">:</span> <span class="p">[],</span>
          <span class="nx">type</span><span class="o">:</span> <span class="nx">type</span>
        <span class="p">};</span>
      <span class="p">}</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Objects that are active on a given pool at any given time.</p></div></div><div class="code"><div class="wrapper">      <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">active</span><span class="p">[</span><span class="nx">alias</span><span class="p">]</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">active</span><span class="p">[</span><span class="nx">alias</span><span class="p">]</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="p">}</span>

      <span class="k">this</span><span class="p">.</span><span class="nx">addInitialObjectsToPool</span><span class="p">(</span><span class="nx">amount</span><span class="p">,</span> <span class="nx">alias</span><span class="p">);</span>

      <span class="k">this</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">INIT</span><span class="p">);</span>
    <span class="p">},</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><hr /></div></div></div><div class="segment"><div class="comments doc-section"><div class="wrapper"><p style='color:#AD071D'><strong>createPooledObject</strong></p>

<p>Creates a pooled object.</p>

<p>Parameters:</p>

<ul>
<li><strong>alias must be a String.</strong><br/>(Id used to referer to this kind of object)</li>
</ul></div></div><div class="code"><div class="wrapper">    <span class="nx">createPooledObject</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">alias</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">pool</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">pools</span><span class="p">[</span><span class="nx">alias</span><span class="p">];</span>
      
      <span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">pool</span><span class="p">.</span><span class="nx">type</span><span class="p">();</span>
      <span class="nx">o</span><span class="p">.</span><span class="nx">poolId</span> <span class="o">=</span> <span class="nx">alias</span><span class="p">;</span>   

      <span class="nx">pool</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>
    <span class="p">},</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><hr /></div></div></div><div class="segment"><div class="comments doc-section"><div class="wrapper"><p style='color:#AD071D'><strong>getPoolSize</strong></p>

<p>Gets the size of the requested collection of pooled objects.</p>

<p>Parameters:</p>

<ul>
<li><strong>alias must be a String.</strong><br/>(Id corresponding to an object type)</li>
</ul></div></div><div class="code"><div class="wrapper">    <span class="nx">getPoolSize</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">alias</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">pools</span><span class="p">[</span><span class="nx">alias</span><span class="p">].</span><span class="nx">objects</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="p">},</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><hr /></div></div><div class="code"><div class="wrapper">    </div></div></div><div class="segment"><div class="comments doc-section"><div class="wrapper"><p style='color:#AD071D'><strong>getTotalPooledObjectsCount</strong></p>

<p>Get the total amount of pooled objects</p>

<p><strong>Returns a Number</strong><br/>(Amount of pooled objects)</p></div></div><div class="code"><div class="wrapper">    <span class="nx">getTotalPooledObjectsCount</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">k</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">pools</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">result</span> <span class="o">+=</span> <span class="k">this</span><span class="p">.</span><span class="nx">pools</span><span class="p">[</span><span class="nx">k</span><span class="p">].</span><span class="nx">objects</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
    <span class="p">},</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><hr /></div></div><div class="code"><div class="wrapper">    </div></div></div><div class="segment"><div class="comments doc-section"><div class="wrapper"><p style='color:#AD071D'><strong>getTotalActiveObjectsCount</strong></p>

<p>Get the total amount of active objects</p>

<p><strong>Returns a Number</strong><br/>(Amount of active objects)</p></div></div><div class="code"><div class="wrapper">    <span class="nx">getTotalActiveObjectsCount</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">k</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">active</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">result</span> <span class="o">+=</span> <span class="k">this</span><span class="p">.</span><span class="nx">active</span><span class="p">[</span><span class="nx">k</span><span class="p">].</span><span class="nx">length</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
    <span class="p">},</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><hr /></div></div></div><div class="segment"><div class="comments doc-section"><div class="wrapper"><p style='color:#AD071D'><strong>getActiveObjects</strong></p>

<p>Gets the amount of objects in a given pool, that are active.</p>

<p>Parameters:</p>

<ul>
<li><strong>alias must be a String.</strong><br/>(Id corresponding to an object type)</li>
</ul></div></div><div class="code"><div class="wrapper">    <span class="nx">getActiveObjects</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">alias</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">active</span><span class="p">[</span><span class="nx">alias</span><span class="p">];</span>
    <span class="p">},</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><hr /></div></div></div><div class="segment"><div class="comments doc-section"><div class="wrapper"><p style='color:#AD071D'><strong>getAllActiveObjects</strong></p>

<p>Gets all the active <a href="http://diegomarquez.github.io/game-builder/game-builder-docs/src/hierarchy/game-object.html">game-object</a> instances.</p>

<p><strong>Returns an Object</strong><br/>(All the different types of active <a href="http://diegomarquez.github.io/game-builder/game-builder-docs/src/hierarchy/game-object.html">game-objects</a>)</p></div></div><div class="code"><div class="wrapper">    <span class="nx">getAllActiveObjects</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">active</span><span class="p">;</span>
    <span class="p">},</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><hr /></div></div></div><div class="segment"><div class="comments doc-section"><div class="wrapper"><p style='color:#AD071D'><strong>returnToPool</strong></p>

<p>This method is used in <a href="http://diegomarquez.github.io/game-builder/game-builder-docs/src/pools/assembler.html">assembler</a> when an object is
recycled to send it back to it's corresponding pool for reuse.</p>

<p>Parameters:</p>

<ul>
<li><strong>o must be an Object.</strong><br/>(Returning object)</li>
</ul></div></div><div class="code"><div class="wrapper">    <span class="nx">returnToPool</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">o</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">o</span><span class="p">.</span><span class="nx">poolId</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>

      <span class="k">this</span><span class="p">.</span><span class="nx">pools</span><span class="p">[</span><span class="nx">o</span><span class="p">.</span><span class="nx">poolId</span><span class="p">].</span><span class="nx">objects</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">active</span><span class="p">[</span><span class="nx">o</span><span class="p">.</span><span class="nx">poolId</span><span class="p">].</span><span class="nx">splice</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">active</span><span class="p">[</span><span class="nx">o</span><span class="p">.</span><span class="nx">poolId</span><span class="p">].</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">o</span><span class="p">),</span> <span class="mi">1</span><span class="p">);</span>
      
      <span class="k">this</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">RETURN</span><span class="p">);</span>
    <span class="p">},</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><hr /></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Methods to be overriden by objects extending this one
View <a href="http://diegomarquez.github.io/game-builder/game-builder-docs/src/pools/game-object-pool.html">game-object-pool</a> and
<a href="http://diegomarquez.github.io/game-builder/game-builder-docs/src/pools/component-pool.html">component-pool</a> for implementations.</p></div></div><div class="code"><div class="wrapper">    <span class="nx">getName</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">ErrorPrinter</span><span class="p">.</span><span class="nx">mustOverrideError</span><span class="p">(</span><span class="s1">&#39;Pool&#39;</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">addInitialObjectsToPool</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">amount</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">ErrorPrinter</span><span class="p">.</span><span class="nx">mustOverrideError</span><span class="p">(</span><span class="s1">&#39;Pool&#39;</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">createConfiguration</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">alias</span><span class="p">,</span> <span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">ErrorPrinter</span><span class="p">.</span><span class="nx">mustOverrideError</span><span class="p">(</span><span class="s1">&#39;Pool&#39;</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">getConfiguration</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">nestedCall</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">ErrorPrinter</span><span class="p">.</span><span class="nx">mustOverrideError</span><span class="p">(</span><span class="s1">&#39;Pool&#39;</span><span class="p">);</span>
    <span class="p">},</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><hr /></div></div></div><div class="segment"><div class="comments doc-section"><div class="wrapper"><p style='color:#AD071D'><strong>createNewIfNeeded</strong></p>

<p>Dynamically creates an instance of the type specified. This
method will only create instances of types that do not specify
a maximun amount when created.</p>

<p>Parameters:</p>

<ul>
<li><strong>type must be a String.</strong><br/>(id of the type of object to create)</li>
</ul>

<p><strong>Returns a Boolean</strong><br/>(True or false depending if an object was created or not)</p></div></div><div class="code"><div class="wrapper">    <span class="nx">createNewIfNeeded</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">pools</span><span class="p">[</span><span class="nx">type</span><span class="p">].</span><span class="nx">maxAmount</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">createPooledObject</span><span class="p">(</span><span class="nx">type</span><span class="p">);</span>
        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">},</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><hr /></div></div></div><div class="segment"><div class="comments doc-section"><div class="wrapper"><p style='color:#AD071D'><strong>getPooledObject</strong></p>

<p>Get a pooled object, the object to be returned is added to the collection
of active objects. This method is mainly used by the <a href="http://diegomarquez.github.io/game-builder/game-builder-docs/src/pools/assembler.html">assembler</a>
module when putting together <a href="http://diegomarquez.github.io/game-builder/game-builder-docs/src/hierarchy/game-object.html">game-objects</a>.</p>

<p>Parameters:</p>

<ul>
<li><strong>type must be a String.</strong><br/>(id of the type of object to retrieve)</li>
</ul>

<p><strong>Returns an Object</strong></p></div></div><div class="code"><div class="wrapper">    <span class="nx">getPooledObject</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">pools</span><span class="p">[</span><span class="nx">type</span><span class="p">].</span><span class="nx">objects</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">active</span><span class="p">[</span><span class="nx">type</span><span class="p">].</span><span class="nx">push</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>
      
      <span class="k">this</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">GET</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">o</span><span class="p">;</span>
    <span class="p">},</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><hr /></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p style='color:#AD071D'><strong>clear</strong></p>

<p>Clear a pool out of everything. This method is
used by the <a href="http://diegomarquez.github.io/game-builder/game-builder-docs/src/pools/reclaimer.html">reclaimer</a> module.</p></div></div><div class="code"><div class="wrapper">    <span class="nx">clear</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">k</span><span class="p">;</span>

      <span class="k">for</span><span class="p">(</span><span class="nx">k</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">pools</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">pool</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">pools</span><span class="p">[</span><span class="nx">k</span><span class="p">].</span><span class="nx">objects</span><span class="p">;</span>

        <span class="k">while</span> <span class="p">(</span><span class="nx">pool</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">){</span>
          <span class="nx">Util</span><span class="p">.</span><span class="nx">destroyObject</span><span class="p">(</span><span class="nx">pool</span><span class="p">.</span><span class="nx">pop</span><span class="p">());</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="k">for</span><span class="p">(</span><span class="nx">k</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">active</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">active</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">active</span><span class="p">[</span><span class="nx">k</span><span class="p">];</span>

        <span class="k">while</span> <span class="p">(</span><span class="nx">active</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">){</span>
          <span class="nx">Util</span><span class="p">.</span><span class="nx">destroyObject</span><span class="p">(</span><span class="nx">active</span><span class="p">.</span><span class="nx">pop</span><span class="p">());</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="k">for</span><span class="p">(</span><span class="nx">k</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">configurations</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">Util</span><span class="p">.</span><span class="nx">destroyObject</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">configurations</span><span class="p">[</span><span class="nx">k</span><span class="p">]);</span>
      <span class="p">}</span>

      <span class="k">this</span><span class="p">.</span><span class="nx">pools</span> <span class="o">=</span> <span class="p">{};</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">configurations</span> <span class="o">=</span> <span class="p">{};</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">active</span> <span class="o">=</span> <span class="p">{};</span> 

      <span class="k">this</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">CLEAR</span><span class="p">);</span>
    <span class="p">},</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><hr /></div></div></div><div class="segment"><div class="comments doc-section"><div class="wrapper"><p style='color:#AD071D'><strong>toString</strong></p>

<p>Return a string representation of the pool. For debugging purposes.</p>

<p><strong>Returns a String</strong></p></div></div><div class="code"><div class="wrapper">    <span class="nx">toString</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">r</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">name</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">getName</span><span class="p">()</span>
      <span class="p">}</span>

      <span class="kd">var</span> <span class="nx">total</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">k</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">pools</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">r</span><span class="p">[</span><span class="nx">k</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
          <span class="nx">pooled</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">pools</span><span class="p">[</span><span class="nx">k</span><span class="p">].</span><span class="nx">objects</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
          <span class="nx">active</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">active</span><span class="p">[</span><span class="nx">k</span><span class="p">].</span><span class="nx">length</span><span class="p">,</span>
          <span class="nx">total</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">pools</span><span class="p">[</span><span class="nx">k</span><span class="p">].</span><span class="nx">objects</span><span class="p">.</span><span class="nx">length</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">active</span><span class="p">[</span><span class="nx">k</span><span class="p">].</span><span class="nx">length</span>
        <span class="p">}</span>

        <span class="nx">total</span> <span class="o">+=</span> <span class="nx">r</span><span class="p">[</span><span class="nx">k</span><span class="p">].</span><span class="nx">total</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">r</span><span class="p">[</span><span class="s1">&#39;total&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nx">total</span><span class="p">;</span>

      <span class="k">return</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">r</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
    <span class="p">}</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><hr /></div></div><div class="code"><div class="wrapper">  <span class="p">});</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h3 id="getters-for-all-the-types-of-events-a-pool-can-hook-into">Getters for all the types of events a Pool can hook into</h3></div></div></div><div class="segment"><div class="code"><div class="wrapper">  <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">Pool</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s2">&quot;INIT&quot;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="s1">&#39;init&#39;</span><span class="p">;</span> <span class="p">}</span> <span class="p">});</span> 
  <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">Pool</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s2">&quot;GET&quot;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="s1">&#39;get&#39;</span><span class="p">;</span> <span class="p">}</span> <span class="p">});</span>
  <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">Pool</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s2">&quot;RETURN&quot;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="s1">&#39;return&#39;</span><span class="p">;</span> <span class="p">}</span> <span class="p">});</span>
  <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">Pool</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s2">&quot;CLEAR&quot;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="s1">&#39;clear&#39;</span><span class="p">;</span> <span class="p">}</span> <span class="p">});</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><hr /></div></div><div class="code"><div class="wrapper">  <span class="k">return</span> <span class="nx">Pool</span><span class="p">;</span>
<span class="p">});</span></div></div></div></div></body></html>